// Generated by CoffeeScript 1.10.0
var getProxy, router, statusChecker, urlHelper;

getProxy = require('../lib/proxy').getProxy;

router = require('../lib/router');

statusChecker = require('../lib/status_checker');

urlHelper = require('cozy-url-sdk');

module.exports.defaultRedirect = function(req, res) {
  return getProxy().web(req, res, {
    target: urlHelper.home.url()
  });
};

module.exports.showRoutes = function(req, res) {
  return res.status(200).send(router.getRoutes());
};

module.exports.resetRoutes = function(req, res, next) {
  return router.reset(function(error) {
    if (error != null) {
      return next(new Error(error));
    } else {
      return res.status(200).send({
        success: true
      });
    }
  });
};

module.exports.status = function(req, res, next) {
  return statusChecker.checkAllStatus(function(err, status) {
    if (err) {
      return next(new Error(err));
    } else {
      return res.send(status);
    }
  });
};
